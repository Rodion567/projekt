<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Restaran API</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  background: #f9f9f9;
  color: #333;
}

#hero {
  text-align: center;
  padding: 60px 20px;
  background: linear-gradient(to right, #ffd3b6, #ffaaa5);
  border-bottom: 2px solid #ccc;
}

#menu {
  padding: 40px 20px;
}

.menu-cards {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
}

.card {
  background: #ffffff;
  border-radius: 12px;
  padding: 20px;
  width: 220px;
  text-align: center;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  transition: transform 0.3s, box-shadow 0.3s;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.card button {
  background: #ff6b35;
  color: white;
  border: none;
  padding: 10px;
  cursor: pointer;
  border-radius: 5px;
  margin-top: 10px;
  transition: 0.3s;
}

.card button:hover {
  background: #ff3d00;
}

.menu-img {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 10px;
}

#reviews {
  padding: 40px 20px;
  background: #fff5f0;
}

#reviews form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-width: 400px;
  margin-bottom: 20px;
}

#reviews-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
  max-width: 700px;
  margin-top: 20px;
}

.review-card {
  background: #ffffff;
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  transition: transform 0.3s, box-shadow 0.3s;
}

.review-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.review-card h4 {
  margin: 0 0 5px;
  color: #ff6b35;
}

.review-card p {
  margin: 0 0 10px;
  font-style: italic;
}

.review-card span {
  font-size: 0.85em;
  color: #999;
}

#cart {
  position: fixed;
  top: 80px;
  right: 20px;
  background: #fff;
  border-radius: 10px;
  padding: 20px;
  width: 300px;
  box-shadow: 0 6px 25px rgba(0,0,0,0.15);
  z-index: 100;
}

#cart button {
  width: 100%;
  background: #ff6b35;
  color: white;
  border: none;
  padding: 10px;
  cursor: pointer;
  border-radius: 5px;
  margin-top: 10px;
  transition: 0.3s;
}

#cart button:hover {
  background: #ff3d00;
}
</style>
</head>
<body>

<section id="hero">
  <h1>Добро пожаловать в Restaran!</h1>
  <p>Вкусная еда рядом с вами</p>
</section>

<section id="menu">
  <h2>Меню</h2>
  <div class="menu-cards">
    <!-- Меню подгрузится из API -->
  </div>
</section>

<section id="reviews">
  <form id="review-form">
    <input type="text" name="name" placeholder="Ваше имя" required>
    <textarea name="review" placeholder="Ваш отзыв" required></textarea>
    <button type="submit">Оставить отзыв</button>
  </form>
  <div id="reviews-list"></div>
</section>

<aside id="cart">
  <h2>Корзина:</h2>
  <ul id="cart-items"></ul>
  <p>Итого: <span id="cart-total">0</span> тг</p>
  <button id="clear-cart">Очистить корзину</button>
</aside>

<script>
const menuCards = document.querySelector('.menu-cards');
const cart = [];
const cartItems = document.getElementById('cart-items');
const cartTotal = document.getElementById('cart-total');

// ===================== CART =====================
function addCartButtons() {
  document.querySelectorAll('.card button').forEach(btn => {
    btn.addEventListener('click', () => {
      const item = btn.dataset.item;
      const price = Number(btn.dataset.price);
      const existing = cart.find(i => i.item === item);
      if (existing) existing.quantity++;
      else cart.push({ item, price, quantity: 1 });
      renderCart();
    });
  });
}

function renderCart() {
  cartItems.innerHTML = '';
  let total = 0;
  cart.forEach(i => {
    const li = document.createElement('li');
    li.textContent = `${i.item} — ${i.price} тг x${i.quantity}`;
    cartItems.appendChild(li);
    total += i.price * i.quantity;
  });
  cartTotal.textContent = total;
}

document.getElementById('clear-cart').addEventListener('click', () => {
  cart.length = 0;
  renderCart();
});

// ===================== MENU API =====================
async function fetchMenuFromAPI() {
  try {
    const response = await fetch('https://www.themealdb.com/api/json/v1/1/search.php?s=');
    const data = await response.json();
    const meals = data.meals || [];
    menuCards.innerHTML = '';

    meals.forEach(item => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <img src="${item.strMealThumb}" alt="${item.strMeal}" class="menu-img">
        <h3>${item.strMeal}</h3>
        <p>${item.strCategory || ''}</p>
        <button data-item="${item.strMeal}" data-price="${Math.floor(Math.random() * 350 + 150)}">В корзину</button>
      `;
      menuCards.appendChild(card);
    });

    addCartButtons();
  } catch (err) {
    console.error('Ошибка загрузки меню:', err);
  }
}

fetchMenuFromAPI();

// ===================== REVIEWS =====================
const reviewForm = document.getElementById('review-form');
const reviewsList = document.getElementById('reviews-list');

let allReviews = [
  {name: 'Иван', review: 'Очень вкусная пицца!', created_at: new Date()},
  {name: 'Мария', review: 'Быстрая доставка, спасибо!', created_at: new Date()}
];

function renderReviews(reviews) {
  reviewsList.innerHTML = '';
  reviews.forEach(r => {
    const card = document.createElement('div');
    card.className = 'review-card';
    card.innerHTML = `
      <h4>${r.name}</h4>
      <p>${r.review}</p>
      <span>${new Date(r.created_at).toLocaleDateString()}</span>
    `;
    reviewsList.appendChild(card);
  });
}

reviewForm.addEventListener('submit', (e) => {
  e.preventDefault();
  const name = reviewForm.name.value;
  const review = reviewForm.review.value;
  allReviews.unshift({ name, review, created_at: new Date() });
  renderReviews(allReviews);
  reviewForm.reset();
});

renderReviews(allReviews);
</script>

</body>
</html>